## 一、改动目标

页面：`src\views\ResultView.vue`

结果页在保持“极简、低压力”的前提下，引入**任务的弱关联能力**，用于结构化记录冲动，但不改变结果页的核心职责。

核心原则：

* 结果页的主任务仍然是**确认本次冲动的结果状态**
* 任务仅作为**可选的事后补充结构**
* 任何情况下，任务都**不是必选项**

---

## 二、结果页新的整体结构

页面信息层级（从上到下）：

1. 页面标题与说明（不变）
2. 结果选择（我扛住了 / 我没扛住）
3. 【可选】任务关联入口
4. 完成记录按钮
5. 跳过按钮

说明：

* 结果选择始终是页面的视觉与交互核心
* 任务相关内容必须弱化存在感，不能与结果选择竞争注意力

---

## 三、任务关联逻辑（新）

### 1. 展示前提

任务关联入口仅在以下条件同时满足时显示：

* 用户已选择结果（resisted / relapsed）
* 当前 intervention 尚未完成

否则：

* 不展示任何任务相关内容

---

### 2. 有任务的情况

#### 页面表现

在结果选择完成后，显示一行弱提示：

> 关联一个任务（可选）

右侧为操作按钮：

* 「选择」

该入口不自动弹出任何选择框。

---

#### 底部弹出框（Bottom Sheet）交互

**触发方式**：点击「选择」

**弹出框内容**：

* 标题：

  > 这次冲动，更像是下面哪个？
* 任务列表：

  * 最近使用 / 最近创建的 3–5 个“我不要”任务
  * 以列表项或 chip 形式展示
* 固定选项：

  * 不确定 / 不关联

**交互规则**：

* 点击任一任务：

  * 立即选中并关闭弹出框
* 点击「不确定 / 不关联」：

  * 关闭弹出框，不建立关联
* 不提供确认按钮

---

### 3. 没有任务的情况

#### 页面表现

在结果选择完成后，显示一段弱提示文案：

> 这种冲动如果以后还会出现，可以给它起个名字

按钮：

* * 添加一个“我不要”任务
* 先不用

说明：

* 不自动弹出创建流程
* 不阻断完成记录

---

#### 快速添加任务规则

* 在结果页创建的新任务：

  * 自动关联当前冲动记录
* 创建完成后：

  * 返回结果页
  * 可直接点击「完成记录」

---

## 四、结果提交规则

### 1. 完成记录

* 用户点击「完成记录」时：

  * 提交当前 outcome
  * 若已选择任务，则提交 taskId
  * 若未选择任务，则 taskId = null

### 2. 跳过记录

* 用户点击「跳过，不记录结果」：

  * outcome = null
  * taskId = null
  * 不进入任务关联流程

---

## 五、关键边界条件汇总

### 边界 1：任务永远不是必选

* 不论是否存在任务
* 不论是否选择结果
* 系统不得提示“未选择任务”

---

### 边界 2：任务选择只能发生在结果页

* 完成记录后不允许再次关联任务
* 不支持回溯编辑

---

### 边界 3：成功 / 失败不影响任务逻辑

* 「我扛住了」与「我没扛住」下
* 任务关联文案、交互完全一致
* 不出现“失败任务”语义

---

### 边界 4：用户中途离开页面

* 若未点击完成或跳过：

  * intervention 视为未记录结果
  * 不补问、不弹提示

---

## 六、设计原则总结

* 冲动是事件，任务是结构
* 结果页不是复盘页，而是“收尾页”
* 所有附加信息都必须：

  * 可选
  * 可跳过
  * 不带评价

这套设计确保：

* 极简体验不被破坏
* 数据关系可被温和建立
* 用户不会因为“记录”而产生额外心理负担
