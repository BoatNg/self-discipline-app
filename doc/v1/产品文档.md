明白了，你希望在现有 **“我不要”冲动控制”**功能基础上，引入 **“我想要”目标打卡** 功能，并尽量保持页面结构不大变，同时合理扩展指标和任务逻辑。我帮你把思路补充和细化，然后给出每个页面的功能和交互方案。

---

## 1️⃣ 首页 HomeView.vue

**新增功能/调整：**

### 当前首页：

* 展示今日冲动 / 今日干预
* 大按钮“我现在有冲动” → 干预流程

### 新增逻辑：

1. **新增任务展示区**

   * 展示“我不要”类型任务（原本冲动触发关联）
   * 展示“我想要”类型任务（每日打卡任务）
   * 对“我想要”任务，点击直接进入打卡流程，不走原来的干预

2. **修改数据指标**

   * 原指标：

     * 今日冲动（冲动次数）
     * 今日干预（使用干预工具次数）
   * 新增指标建议：

     * 今日完成打卡任务数（“我想要”类型）
     * 当前任务完成率（总完成 / 总任务数）
     * 保持原来的今日冲动 / 干预指标
   * 指标布局：

     ```
     左上: 今日冲动  | 右上: 今日干预
     左下: 今日完成打卡 | 右下: 当前任务完成率
     ```

     （保留原有网格布局，新增两个指标即可）

3. **按钮逻辑**

   * 原按钮“我现在有冲动” → 仅触发“我不要”干预
   * “我想要”任务打卡入口：

     * 在任务列表中点击任务即可进入打卡页面
     * 或新增首页悬浮“今日打卡”按钮（可选）

---

## 2️⃣ 任务创建页面 TaskCreateView.vue（新增）

**功能/交互设计：**

* **任务类型选择**

  * 我不要（冲动控制类型）
  * 我想要（目标打卡类型）

* **任务周期设置**

  * 开始日期 / 结束日期（必填）
  * 周期类型：

    * 每日
    * 每周
    * 自定义天数

* **成功标准**

  * **我不要类型**：

    * 在任务周期内，冲动被成功控制的次数 / 失败次数
    * 例如：某任务要求一周内每次冲动都扛住 → 全部扛住即成功
  * **我想要类型**：

    * 每天完成打卡一次
    * 可以设置打卡天数要求（例如 7/7 天完成即成功）

* **额外字段**

  * 任务名称
  * 任务图标 / 标签（可选）
  * 提醒时间（可选）

* **交互逻辑**

  * 完成创建 → 返回首页，新增任务立即显示
  * 用户可从任务列表编辑 / 删除任务

---

## 3️⃣ 历史记录 HistoryView.vue

**调整：**

* 按任务类型区分：

  * “我不要”任务：显示干预记录（已存在）
  * “我想要”任务：显示打卡记录（是否完成，每天打卡状态）
* 可以增加任务完成率 / 周期统计：

  * 我不要：扛住次数 / 总冲动次数
  * 我想要：打卡完成天数 / 总天数
* 界面展示：

  * 任务类型标签（💪 我想要 / 🚫 我不要）
  * 按周期分组显示任务进度

---

## 4️⃣ 干预流程 InterventionView.vue

* **我不要**任务：保持原有流程
* **我想要**任务：无需干预流程，直接跳转打卡页面（类似 ResultView，但逻辑为“打卡完成”）
* 可通过 `task.type` 判断加载不同流程组件

---

## 5️⃣ 结果页面 ResultView.vue

**新增逻辑**：

* **我不要任务结果**（现有逻辑）：扛住 / 没扛住
* **我想要任务结果**：

  * 打卡成功（已打卡）
  * 打卡失败（未打卡）
  * 成功 / 失败仅用于周期统计，不影响单次干预指标
* **任务关联**：与原逻辑一致，用户可选择任务或新增任务

---

## 6️⃣ App.vue / 路由 Router

* 路由增加 TaskCreateView.vue（任务创建）
* 路由守卫：

  * 我不要干预仍需 `isInIntervention` 判断
  * 我想要任务打卡无需干预状态，可直接访问
* App.vue 页面结构无需大改，任务列表和首页指标区即可扩展显示

---

## 7️⃣ 数据指标设计

| 类型  | 指标      | 展示位置 | 描述                       |
| --- | ------- | ---- | ------------------------ |
| 我不要 | 今日冲动次数  | 左上   | 当天冲动次数                   |
| 我不要 | 今日干预次数  | 右上   | 当天使用干预工具次数               |
| 我想要 | 今日完成打卡  | 左下   | 今日完成的打卡任务数               |
| 我想要 | 当前任务完成率 | 右下   | 当前活跃打卡任务完成率（周期内完成天数/总天数） |

* 可在首页网格布局中增加这两项，保持界面整洁
* 指标可以用不同颜色区分类型（冲动：橙色 / 打卡：绿色）

---

## 8️⃣ 用户路径示例

### 情境 A：我不要冲动

```
首页 → “我现在有冲动” → 干预流程（Timer/Breathe/Dump） → 结果记录（扛住/没扛住） → 首页
```

### 情境 B：我想要目标打卡

```
首页 → 任务列表 → 点击“我想要”任务 → 打卡页面 → 结果记录（打卡成功/未打卡） → 首页
```

### 任务创建

```
首页 → “新增任务”按钮 → TaskCreateView → 填写任务类型/周期 → 保存 → 首页任务列表显示
```

---
