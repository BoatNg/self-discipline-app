下面给你一份**产品方案级别**的设计说明，直接对应你给出的技术文档，并严格遵循你的约束：

> ✅ **只在「设置页面」新增：登录 / 上传 / 同步（恢复）按钮**
> ❌ **其他页面与原有交互逻辑完全不改**

---

## 一、产品目标

为当前**单机优先（Local-First）**应用增加一个**轻量级云端备份能力**，满足以下核心诉求：

1. **数据不丢**：更换设备 / 清缓存后可恢复
2. **不侵入现有逻辑**：不改任务、记录、日历等任何业务页面
3. **低心智负担**：不做实时同步，只做“我点了才同步”
4. **实现成本最低**：前端不重构数据结构，后端不拆表

产品形态本质上是：

> **“带账号体系的云端备份 / 还原功能”**

---

## 二、整体产品结构

### 1️⃣ 功能范围（非常克制）

| 模块                | 是否新增 | 说明         |
| ----------------- | ---- | ---------- |
| 任务 / 日历 / 记录页     | ❌    | 完全不动       |
| LocalStorage 数据结构 | ❌    | 完全不变       |
| 设置页面              | ✅    | 新增「云端同步」区域 |
| 用户体系              | ✅    | 仅用于绑定备份数据  |

---

## 三、设置页信息架构（IA）

在【设置页面】底部新增一个独立区域：

### 📌 区块标题

**云端同步**

（副标题：用于备份与恢复本地数据）

---

## 四、状态与交互设计

### 状态一：未登录

#### UI 表现

```
☁️ 云端同步
--------------------------------
登录后可将你的数据备份到云端，
用于多设备恢复或防止数据丢失。

[ 登录 / 注册 ]
```

#### 行为逻辑

* 点击【登录 / 注册】

  * 打开登录弹窗或独立登录页
  * 登录方式：邮箱 + 密码（或第三方，产品层不限制）
* 登录成功后：

  * 不触发任何自动同步
  * 回到设置页 → 进入「已登录状态」

✅ **关键点**：

> 登录 ≠ 同步，只是“获得同步资格”

---

### 状态二：已登录（首次，无云端数据）

#### UI 表现

```
☁️ 云端同步
--------------------------------
已登录：user@email.com

云端暂无备份数据

[ ☁️ 上传到云端 ]
```

#### 行为逻辑

* 点击【上传到云端】

  * 将当前 LocalStorage **完整覆盖写入云端**
  * 云端生成该用户的第一份备份
* 成功后：

  * Toast：「云端备份成功」
  * 显示最近同步时间

---

### 状态三：已登录（已有云端数据）

#### UI 表现

```
☁️ 云端同步
--------------------------------
已登录：user@email.com
上次云端更新时间：2026-01-18 21:30

[ ☁️ 上传到云端 ]
[ 📥 从云端恢复 ]
```

---

## 五、按钮级交互定义（产品重点）

### 1️⃣ ☁️ 上传到云端（备份）

#### 产品语义

> **“用当前设备的数据，覆盖云端备份”**

#### 点击流程

1. 校验登录状态
2. 读取 LocalStorage（整体 JSON）
3. 写入云端（upsert）
4. 更新云端 `updated_at`

#### 成功反馈

* Toast：`已成功备份到云端`
* 更新时间刷新

#### 冲突提示（可选 · 推荐）

若检测到：

* 云端更新时间 > 本地上次同步时间

则弹窗：

```
云端数据比当前设备更新。
如果继续上传，将覆盖云端数据。

建议先【从云端恢复】。

[ 继续上传 ]  [ 取消 ]
```

---

### 2️⃣ 📥 从云端恢复（同步 / 下载）

#### 产品语义

> **“用云端备份，覆盖当前设备的数据”**

#### 点击流程

1. 校验登录状态
2. 拉取云端 JSON
3. **强提醒（破坏性操作）**

确认弹窗文案：

```
此操作将覆盖你当前设备的所有本地数据，
且无法撤销。

是否继续？
```

4. 覆盖写入 LocalStorage
5. 刷新页面 / 重载应用状态

#### 成功反馈

* 页面刷新
* 所有页面自然显示“恢复后”的状态

---

## 六、为什么这个方案「产品上是对的」

### ✅ 1. 完全不破坏用户已有习惯

* 原来怎么用，现在还是怎么用
* 不引入“自动同步”“冲突合并”等复杂概念

### ✅ 2. 用户对风险有**完全控制权**

* 同步是**手动的**
* 覆盖是**明确确认的**
* 没有“悄悄改我数据”的风险


---

## 七、产品文案关键词（可直接用）

* **云端同步**
* **上传到云端（备份）**
* **从云端恢复**
* **此操作将覆盖本地数据**
* **建议先下载再上传**

---

## 八、产品阶段规划（给你一个演进路径）

### V1.3.0（当前）

* 登录
* 手动上传
* 手动恢复
* 单份云端数据


### ❌ 不建议做（至少前期）

* 实时同步
* 字段级冲突合并
* 多端自动覆盖

---


